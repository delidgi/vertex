<div id="vig_settings" class="extension_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>Vertex Image Generation ðŸŽ¨</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <!-- Info -->
            <div class="flex-container flexFlowColumn">
                <small>
                    <i class="fa-solid fa-info-circle"></i>
                    Uses Gemini models with image generation capability.
                    Requires Google AI Studio API key or Vertex AI Express Mode.
                </small>
                <hr>
            </div>

            <!-- Model Selection -->
            <div class="flex-container">
                <div class="flex1">
                    <label for="vig_model">Model</label>
                    <select id="vig_model" class="vig-setting">
                        <option value="gemini-3-pro-image-preview">Nano Banana Pro (Gemini 3 Pro Image)</option>
                        <option value="gemini-2.5-flash-preview-image-generation">Nano Banana (Gemini 2.5 Flash Image)</option>
                    </select>
                </div>
            </div>

            <!-- Aspect Ratio -->
            <div class="flex-container">
                <div class="flex1">
                    <label for="vig_aspect_ratio">Aspect Ratio</label>
                    <select id="vig_aspect_ratio" class="vig-setting">
                        <option value="1:1">1:1 (Square)</option>
                        <option value="3:4">3:4 (Portrait)</option>
                        <option value="4:3">4:3 (Landscape)</option>
                        <option value="9:16">9:16 (Tall)</option>
                        <option value="16:9">16:9 (Wide)</option>
                    </select>
                </div>
            </div>

            <!-- Options -->
            <div class="flex-container flexFlowColumn">
                <label class="checkbox_label" title="Include character and persona descriptions in the prompt">
                    <input type="checkbox" id="vig_include_descriptions" class="vig-setting" />
                    <span>Include character descriptions</span>
                </label>
            </div>

            <!-- System Instruction -->
            <div class="flex-container flexFlowColumn">
                <label for="vig_system_instruction">System Instruction</label>
                <textarea id="vig_system_instruction" class="vig-setting text_pole textarea_compact" rows="3"
                    placeholder="Instructions for image generation..."></textarea>
            </div>

            <hr>

            <!-- Generate Button -->
            <div class="flex-container">
                <div id="vig_generate_btn" class="menu_button menu_button_icon"
                    title="Generate image from last message">
                    <i class="fa-solid fa-image"></i>
                    <span>Generate Image</span>
                </div>
            </div>

            <!-- Output Preview -->
            <div id="vig_preview_container" class="flex-container flexFlowColumn" style="display: none;">
                <label>Generated Image</label>
                <img id="vig_preview_image" style="max-width: 100%; border-radius: 8px;" />
            </div>

            <hr>

            <!-- Gallery Section -->
            <div class="inline-drawer">
                <div class="inline-drawer-toggle inline-drawer-header">
                    <b>Gallery</b>
                    <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
                </div>
                <div class="inline-drawer-content">
                    <div id="vig_gallery_container" class="vig_gallery"></div>
                    <div id="vig_gallery_empty" class="vig_gallery_empty">
                        <i class="fa-solid fa-images"></i>
                        <span>No images generated yet.</span>
                    </div>
                    <div class="flex-container">
                        <div id="vig_clear_gallery" class="menu_button menu_button_icon" title="Clear gallery">
                            <i class="fa-solid fa-trash"></i>
                            <span>Clear Gallery</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
